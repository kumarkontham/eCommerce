{% load static %}
<!DOCTYPE html>
<html>
    <head>
       <title >{%block title%}Ecommerce{% endblock title%}</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        {% load static %}
        <link rel='stylesheet' href="{% static 'base.css'%}">
        <link rel='stylesheet' href="{% static 'index.css'%}">
        <link rel='stylesheet' href="{% static 'cart.css'%}">

        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
        <style>
            
        </style>
    </head>
    <body>
            
        <header class="hea1">
            <div class="img1">
           <a href="/" class="logo"><img src="{%static 'images/logo.JPG' %}"></a>
        </div>
           <ul class="nav-item dropdown" style="margin-top: 0%;align-items: center;margin-bottom: 1%;">
            <a class="nav-link dropdown-toggle"style="text-decoration:none; padding:10px;margin-left:1px;" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Categories
            </a>
            <ul class="dropdown-menu dropdown-menu-dark" style="padding-right: 10px;">
                <li><a class="dropdown-item" href="{%url 'category_view' 'mobiles'%}">mobiles</a></li>
                <li><a class="dropdown-item" href="{%url 'category_view' 'laptops'%}">laptops</a></li>
                <li><a class="dropdown-item" href="{%url 'category_view' 'clothing'%}">clothing</a></li>
              </ul>
              
            </ul>
        
           
            <div class="sea1" style="justify-content: flex-start;">
                <form action="{% url 'search' %}">
                <input type="text" id="sr1" placeholder= " &nbsp;Search..." name="keyword" style="border-radius: 20px 0px 0px 20px; border: 1px solid #d1cbcb; align-content: center;height: 38px;"><button style="background-color: rgb(71, 71, 248);  border-radius: 1px 20px 20px 1px; padding: 4px;width: 70px; color: white;height: 38px;"><i class="fa fa-search"></i></button>
                    </form>
            
               <div id="suggestions" style="margin: 0.3% 0% 0% 0%;">
                
               <ul><a id="sp" href="/products" style="text-decoration: none; color: black; font-family: Arial, Helvetica, sans-serif; background-color: #ffff;" >  </ul></a>
                
                </div>

                </div>
                
                
            
            <nav class="navbar navbar-expand-lg ">
            <div id="tags">
                <ul class="nav nav-pills">
                    <li class="nav-link scrollto">
                      <a  href="/">Home</a>
                    </li>
                    {%if request.user.is_authenticated %}
                    <li style="padding-top: 5px; margin-top: 0%;"><a href="/cart"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"  viewBox="0 0 16 16" style="display: inline-flex;color: black;">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l.84 4.479 9.144-.459L13.89 4zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                      </svg><span name="value" class="val" style="left: 30px;background-color: red;padding:0 6px;border-radius: 50%;position:relative;margin-left: -39px;top: -9px;">{{val}}</span></a></li>
                      {% else %}
                      <li style="padding-top: 8px;"><a href="/carti"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart3" viewBox="0 0 16 16">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l.84 4.479 9.144-.459L13.89 4zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                      </svg></a></li>
                      {% endif %}
                        
                      {%if request.user.is_authenticated %}
                          <li class="nav-link scrollto"><a  href="/logout">Logout</a></li>
                        {% else %}
                              <li class="nav-link scrollto" id=""><a  href="/login/">Login</a></li>
                              
                        
                        {% endif %}
                    
                    {% if request.user.is_authenticated %}
                    
                   
                        <ul class="navbar-nav" style="margin-top: 0.8%; align-items: center; margin-right: 36px;" >
                          <li class="nav-item dropdown">
                            <button class="btn btn-white dropdown" data-bs-toggle="dropdown" aria-expanded="false" style="border: none; outline: none;"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" style=" border-radius:50%; background-color: #e4e4e4;" class="bi bi-person" viewBox="0 0 16 16">
                                <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
                              </svg>&nbsp;
                              Hi,{{user.username}}
                            </button>
                            <ul class="dropdown-menu dropdown-menu-dark" style="padding-right: 10px;">
                              <li><a class="dropdown-item" href="#">profile</a></li>
                              <li><a class="dropdown-item" href="#">My orders</a></li>
                              <li><a class="dropdown-item" href="#">Contactus</a></li>
                            </ul>
                          </li>
                        </ul>
                      </div>
                      
                    {% else %}
                    <li class="nav-link scrollto">
                        <a  href="/contact/">Contactus</a>
                   
                    </li>
                    {%endif%}
                </ul>
            </div>
            </nav>
        </header>
        <body>
            {% block body%}
            {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert" >
                            <strong>{{message}}</strong>
                          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="True">&times;</span>
                          </button>
                          
                        </div>
                     
                    {%endfor%}
       
        <h2 style="margin:2% 2% 1% 2%;">Enjoy your shopping</h2>
       
        
        <ul class="product-list">
            {% for product in products %}
            <div id="products" style="background: #ffff;">
                <li class="product-item">
                    <img src="{{product.image.url}}" alt="{{ product.name }}" width="195" height="180" align-items="center">
                    <h3>{{ product.name }}</h3>
                    <p>{{ product.description }}</p>
                    <span>Price:&nbsp;&#8377; {{ product.price }}</span>
                    <a href="{%url 'product_detailed_view' product.id%}" class="btn btn-primary"style="width:80%;">View Product</a>
                    {%if request.user.is_authenticated %}
                    <a class="btn btn-primary"style="width:80%;" href="{% url 'add_to_cart' product.id %}">Add to Cart</a>
                    {%else%}
                    <a class="btn btn-primary"style="width:80%;" href="/carti">Add to Cart</a>
                    {%endif%}
                   
                </li>
            </div>
            {% endfor %}
        </ul>
        <script>setTimeout(()=>{
                    
            $(".alert").alert("close");},1000)</script>
            {%endblock body%}
          
<footer class="ecommerce-footer">
  <div class="footer-container">
    <div class="footer-section">
      <h4>Company</h4>
      <ul>
        <li><a href="/about">About Us</a></li>
        <li><a href="/contact">Contact</a></li>
        <li><a href="/store-locator">Store Locator</a></li>
      </ul>
    </div>
    
    <div class="footer-section">
      <h4>Categories</h4>
      <ul>
        <li><a href="/electronics">Electronics</a></li>
        <li><a href="/fashion">Fashion</a></li>
        <li><a href="/sports">Sports</a></li>
      </ul>
    </div>
    <div class="footer-section">
      <h4>Legal</h4>
      <ul>
        <li><a href="/privacy-policy">Privacy Policy</a></li>
        <li><a href="/terms-conditions">Terms & Conditions</a></li>
        
      </ul>
    </div>
    
    <div class="footer-section social-media">
      <h4>Follow Us</h4>
      <a href="#" aria-label="Facebook"><img src="{%static 'images/facebook.png' %}" style="height: 30px;width: 30px;background-color: #d7d1d1; border-radius: 50%;"></a>
      <a href="https://instagram.com/yourbrand" aria-label="Instagram"><img src="{%static 'images/instalogo.png' %}" style="height: 30px;width: 30px;background-color: #d7d1d1; border-radius: 50%;"></a>
      <a href="https://twitter.com/yourbrand" aria-label="Twitter"><img src="{%static 'images/twitterlogo.png' %}" style="height: 30px;width: 30px;background-color: #d7d1d1; border-radius: 70%;"></a>
      <a href="https://linkedin.com/company/yourbrand" aria-label="LinkedIn"><img src="{%static 'images/linkedin.png' %}" style="height: 30px;width: 30px;background-color: #d7d1d1; border-radius: 50%;"></a>
    </div>
    
    
    
    
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 | All rights reserved.</p>
  </div>
</footer>

        
            <script>
                document.getElementById("sr1").addEventListener("keyup", function() {
                    let query = this.value;
                    let resultsContainer = document.getElementById("sp");
        
                    if (query.length > 0) {
                        fetch(`/search/?query=${query}`, {
                            headers: {
                                "X-Requested-With": "XMLHttpRequest"
                            }
                        })
                        .then(response => response.json())
                        .then(data => {
                            resultsContainer.innerHTML = "";
                            if (data.products.length > 0) {
                                data.products.forEach(product => {
                                    let listItem = document.createElement("li");
                                    listItem.textContent =  ` ${product.name} - ${product.price}`;
                                    resultsContainer.appendChild(listItem);
                                });
                            } else {
                                resultsContainer.innerHTML = "<li>No products found.</li>";
                            }
                        });
                    } else {
                        resultsContainer.innerHTML = "";
                    }
                });
            </script>
    
    
    </body>
</html>